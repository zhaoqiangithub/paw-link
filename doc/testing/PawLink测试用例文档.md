# PawLink宠物救助平台测试用例文档

## 文档信息
- **版本**: v1.0
- **创建日期**: 2025-11-17
- **测试范围**: MVP Phase 1 + Phase 2 核心功能
- **测试目标**: 确保产品质量，验证业务指标，降低上线风险

---

## 一、测试策略

### 1.1 测试目标
1. **功能完整性**: 验证所有需求功能正确实现
2. **业务指标达成**: 验证关键KPI（领养成功率>30%，搜索转化率>35%等）
3. **安全合规**: 确保个人信息保护法、动物保护法合规
4. **用户体验**: 确保操作流程简洁，信息准确
5. **风险控制**: 重点验证虚假信息防控、隐私保护

### 1.2 测试分层
- **P0 - 阻塞性**: 核心流程，影响主要功能，必须修复
- **P1 - 严重**: 重要功能缺陷，严重影响用户体验
- **P2 - 一般**: 次要功能问题，有替代方案
- **P3 - 建议**: 优化建议，不影响使用

### 1.3 测试环境
- **客户端**: iOS 14+, Android 9+, Web (Chrome/Safari)
- **服务器**: 开发环境、测试环境、预生产环境
- **数据库**: SQLite (客户端), 后端数据库
- **地图服务**: 高德地图/百度地图 API
- **网络环境**: WiFi, 4G/5G, 弱网环境

---

## 二、MVP Phase 1 核心功能测试用例

### 模块1: 用户认证系统

#### TC-AUTH-001: 实名认证 - 正常流程
- **优先级**: P0
- **测试类型**: 功能测试
- **前置条件**: 用户已安装APP，首次打开
- **测试步骤**:
  1. 打开APP，进入实名认证页面
  2. 输入真实姓名、身份证号
  3. 上传身份证正反面照片
  4. 进行人脸识别验证
  5. 提交认证申请
- **预期结果**:
  - 身份证号格式校验通过
  - 图片上传成功（支持格式：JPG/PNG，大小<5MB）
  - 人脸识别成功匹配
  - 认证状态更新为"审核中"
  - 用户收到认证结果通知（预计时间<24小时）

#### TC-AUTH-002: 实名认证 - 身份证号校验
- **优先级**: P1
- **测试类型**: 功能测试、边界测试
- **测试数据**:
  - 有效身份证号: 110101199001011234
  - 无效格式: 123456、abcdefghijklmnop、11010119900101123X9（过长）
  - 非法字符: 110101199001011@3#
- **预期结果**:
  - 有效身份证号通过校验
  - 无效格式提示"身份证号格式错误，请输入18位有效身份证号"
  - 非法字符自动过滤或提示错误

#### TC-AUTH-003: 实名认证 - 人脸识别失败重试
- **优先级**: P1
- **测试类型**: 异常处理
- **测试步骤**:
  1. 完成前置信息填写
  2. 进入人脸识别环节
  3. 故意遮挡面部/光线不足/多次识别失败
- **预期结果**:
  - 提供重试机制（至少3次机会）
  - 明确提示失败原因（光线不足/面部遮挡/身份证照片不匹配）
  - 3次失败后提供人工审核通道

#### TC-AUTH-004: 志愿者认证 - 技能认证
- **优先级**: P1
- **测试类型**: 功能测试
- **前置条件**: 已完成实名认证
- **测试步骤**:
  1. 进入志愿者认证页面
  2. 选择技能类型（救助技能/医疗基础/运输协助）
  3. 上传相关证明材料（选填）
  4. 填写个人经验描述
  5. 提交背景调查授权
- **预期结果**:
  - 技能类型至少选择1项，最多3项
  - 证明材料上传成功（可选）
  - 背景调查授权协议明确告知调查范围
  - 认证状态更新为"审核中"

#### TC-AUTH-005: 救助机构认证 - 资质审核
- **优先级**: P1
- **测试类型**: 功能测试
- **前置条件**: 机构管理员已完成实名认证
- **测试步骤**:
  1. 选择"救助机构"认证类型
  2. 上传营业执照/社会组织登记证书
  3. 填写机构信息（名称、地址、联系方式、救助规模）
  4. 提供实地验证地址
  5. 提交审核
- **预期结果**:
  - 营业执照/证书OCR识别自动填充机构信息
  - 实地验证地址支持地图选点
  - 机构类型明确区分（正规机构/个人救助站）
  - 审核周期明确提示（预计3-5个工作日）

#### TC-AUTH-006: 认证信息修改限制
- **优先级**: P1
- **测试类型**: 安全测试
- **测试步骤**:
  1. 已认证用户尝试修改姓名、身份证号
  2. 已认证机构尝试修改营业执照号
- **预期结果**:
  - 关键认证信息不允许自行修改
  - 提示"如需修改请联系客服"或提供申诉通道
  - 修改记录留存审计日志

---

### 模块2: 地图+信息发布

#### TC-MAP-001: 地图加载与定位
- **优先级**: P0
- **测试类型**: 功能测试
- **测试步骤**:
  1. 首次打开APP，授权位置权限
  2. 地图加载当前定位点
  3. 显示附近救助/领养信息点
- **预期结果**:
  - GPS定位精度<50米（正常网络环境）
  - 地图加载时间<3秒
  - 初始显示半径5km内信息点
  - 定位失败时提示"定位失败，请检查GPS权限"

#### TC-MAP-002: 地图标记分类显示
- **优先级**: P0
- **测试类型**: 功能测试
- **测试数据**:
  - 待领养宠物: 10条
  - 需救助动物: 5条
  - 医疗中: 3条
  - 已领养: 8条
- **预期结果**:
  - 不同状态使用不同颜色标记（如绿色-待领养/红色-需救助/黄色-医疗中/灰色-已领养）
  - 标记支持点击查看详情
  - 地图缩放时标记聚合显示（避免重叠）
  - 热力图显示救助密度区域

#### TC-MAP-003: 地图筛选半径调整
- **优先级**: P1
- **测试类型**: 功能测试
- **测试步骤**:
  1. 默认显示5km范围
  2. 调整筛选半径为1km, 10km, 50km, 不限
  3. 观察地图信息点变化
- **预期结果**:
  - 半径调整实时生效
  - 信息点数量根据半径动态更新
  - 显示当前筛选结果数量（如"附近3km内共12只待领养宠物"）

#### TC-MAP-004: 发布救助信息 - 标准流程
- **优先级**: P0
- **测试类型**: 功能测试
- **前置条件**: 用户已完成实名认证
- **测试步骤**:
  1. 点击"发布救助信息"
  2. 选择信息类型（待领养/需救助/紧急救助）
  3. 选择动物类型（猫/狗/其他）
  4. 上传照片（至少1张，最多9张）
  5. 填写位置信息（手动输入或GPS定位）
  6. 填写动物情况描述（必填）
  7. 填写联系方式（手机号必填，微信选填）
  8. 提交发布
- **预期结果**:
  - 所有必填项校验通过
  - 照片上传成功（格式JPG/PNG，单张<10MB）
  - GPS定位准确（或地图选点）
  - 信息发布后立即在地图上显示
  - 发布者收到"发布成功"提示

#### TC-MAP-005: 发布信息 - 必填项校验
- **优先级**: P1
- **测试类型**: 边界测试
- **测试场景**:
  - 场景1: 不上传照片直接提交
  - 场景2: 不填写位置信息提交
  - 场景3: 不填写动物情况描述提交
  - 场景4: 不填写联系方式提交
- **预期结果**:
  - 每个场景都阻止提交并高亮提示缺失项
  - 提示文案明确（如"请至少上传1张照片"）
  - 焦点自动定位到第一个缺失项

#### TC-MAP-006: 发布信息 - 照片上传限制
- **优先级**: P1
- **测试类型**: 边界测试、性能测试
- **测试数据**:
  - 正常照片: 3张，每张3MB
  - 超大照片: 1张20MB
  - 超量照片: 尝试上传15张
  - 不支持格式: BMP, TIFF
- **预期结果**:
  - 正常照片上传成功，自动压缩至合理大小（<2MB/张）
  - 超大照片提示"照片过大，请选择10MB以内的照片"
  - 超过9张时禁用上传按钮，提示"最多上传9张照片"
  - 不支持格式提示"仅支持JPG/PNG格式"

#### TC-MAP-007: AI辅助审核 - 重复信息检测
- **优先级**: P1
- **测试类型**: 功能测试、智能算法
- **测试步骤**:
  1. 用户A发布救助信息（位置X，猫，照片P1）
  2. 30分钟后用户B发布类似信息（位置X+100米，猫，照片P2）
  3. 系统检测疑似重复
- **预期结果**:
  - 系统提示"检测到附近200米内有相似救助信息，是否为同一只动物？"
  - 提供查看原信息链接
  - 用户确认"是同一只"后合并信息，标记多人关注
  - 用户确认"不是"后正常发布

#### TC-MAP-008: 信息更新与状态变更
- **优先级**: P0
- **测试类型**: 功能测试
- **前置条件**: 已发布救助信息
- **测试步骤**:
  1. 进入"我的发布"
  2. 选择某条信息，点击"更新状态"
  3. 修改状态为"医疗中" → "待领养" → "已领养"
  4. 添加更新说明（如"已完成免疫接种"）
- **预期结果**:
  - 状态更新实时反映在地图标记颜色上
  - 更新记录显示时间戳和说明
  - 关注该信息的用户收到更新通知
  - "已领养"状态后信息自动下架（7天后归档）

#### TC-MAP-009: 位置隐私保护
- **优先级**: P1
- **测试类型**: 安全测试、隐私保护
- **测试步骤**:
  1. 用户发布救助信息，GPS定位精确位置
  2. 其他用户查看该信息
- **预期结果**:
  - 地图上仅显示模糊位置（误差500米范围）
  - 详细地址仅在发起联系后对双方可见
  - 用户可选择是否公开精确位置

---

### 模块3: 基础搜索过滤

#### TC-SEARCH-001: 距离筛选
- **优先级**: P0
- **测试类型**: 功能测试
- **测试数据**:
  - 用户当前位置: (31.2304, 121.4737) 上海
  - 宠物A距离: 2km
  - 宠物B距离: 8km
  - 宠物C距离: 35km
- **测试步骤**:
  1. 选择距离筛选"5km内"
  2. 查看搜索结果
  3. 切换为"10km内"
  4. 切换为"不限距离"
- **预期结果**:
  - 5km内仅显示宠物A
  - 10km内显示宠物A和B
  - 不限距离显示全部宠物
  - 搜索结果按距离由近到远排序

#### TC-SEARCH-002: 动物类型筛选
- **优先级**: P0
- **测试类型**: 功能测试
- **测试数据**:
  - 猫: 15只
  - 狗: 23只
  - 其他（兔子/鸟类等）: 5只
- **测试步骤**:
  1. 不选择类型（默认全部）
  2. 仅选择"猫"
  3. 仅选择"狗"
  4. 多选"猫+其他"
- **预期结果**:
  - 默认显示全部43只
  - 仅猫显示15只
  - 仅狗显示23只
  - 猫+其他显示20只
  - 结果数量实时更新

#### TC-SEARCH-003: 状态筛选
- **优先级**: P1
- **测试类型**: 功能测试
- **测试选项**:
  - 待领养
  - 需救助
  - 紧急救助
  - 医疗中
- **预期结果**:
  - 每个状态筛选准确
  - 紧急救助优先显示在列表顶部（红色标记）
  - 状态可多选

#### TC-SEARCH-004: 组合筛选
- **优先级**: P1
- **测试类型**: 功能测试
- **测试场景**:
  - 场景: 3km内 + 猫 + 待领养状态
- **预期结果**:
  - 多条件同时生效（AND逻辑）
  - 无结果时提示"未找到符合条件的宠物，试试调整筛选条件"
  - 筛选条件显示在顶部，支持快速清除单个或全部条件

#### TC-SEARCH-005: 搜索转化率验证
- **优先级**: P0
- **测试类型**: 业务指标测试
- **测试方法**:
  - 统计100次搜索行为
  - 记录其中发起联系/收藏的次数
- **预期结果**:
  - 搜索转化率 ≥ 35%（需求文档指标）
  - 转化率 = (发起联系次数 + 收藏次数) / 总搜索次数

#### TC-SEARCH-006: 搜索性能测试
- **优先级**: P1
- **测试类型**: 性能测试
- **测试数据量**:
  - 数据库总宠物信息: 10,000条
  - 当前筛选结果: 500条
- **预期结果**:
  - 搜索响应时间 < 1秒
  - 列表滚动流畅（60fps）
  - 分页加载（每页20条）

---

### 模块4: 一对一沟通

#### TC-CHAT-001: 站内私信 - 发送消息
- **优先级**: P0
- **测试类型**: 功能测试
- **前置条件**: 用户A查看用户B发布的宠物信息
- **测试步骤**:
  1. 点击"联系TA"按钮
  2. 进入聊天界面
  3. 发送文本消息"您好，我想了解这只猫的情况"
  4. 发送图片消息
- **预期结果**:
  - 聊天窗口正常打开
  - 文本消息发送成功，显示发送时间
  - 图片上传成功（<10MB）
  - 对方收到实时消息通知

#### TC-CHAT-002: 消息已读/未读状态
- **优先级**: P1
- **测试类型**: 功能测试
- **测试步骤**:
  1. 用户A发送消息给用户B
  2. 用户B在线立即查看
  3. 用户A查看消息状态
- **预期结果**:
  - 发送后显示"已送达"
  - 对方阅读后显示"已读"
  - 消息列表显示未读消息数量红点

#### TC-CHAT-003: 快速联系 - 电话/微信
- **优先级**: P0
- **测试类型**: 功能测试
- **前置条件**: 用户B在发布信息时留有手机号和微信号
- **测试步骤**:
  1. 用户A点击"快速联系"
  2. 选择"拨打电话"
  3. 返回后选择"微信联系"
- **预期结果**:
  - 拨打电话直接调起系统拨号界面
  - 微信联系显示对方微信号，支持一键复制
  - 记录联系行为（用于统计转化率）

#### TC-CHAT-004: 举报机制
- **优先级**: P1
- **测试类型**: 功能测试、安全防护
- **测试步骤**:
  1. 聊天界面点击右上角"..."
  2. 选择"举报"
  3. 选择举报类型（虚假信息/骚扰/欺诈/虐待动物/其他）
  4. 填写举报描述（选填）
  5. 上传截图证据（选填）
  6. 提交举报
- **预期结果**:
  - 举报类型必选
  - 举报成功后提示"已提交，我们将在24小时内处理"
  - 举报记录留存，防止恶意重复举报（同一用户同一对象24小时内仅可举报1次）
  - 管理后台收到举报通知

#### TC-CHAT-005: 敏感词过滤
- **优先级**: P1
- **测试类型**: 安全测试
- **测试数据**:
  - 辱骂性词汇
  - 涉黄涉暴词汇
  - 联系方式（QQ号、邮箱等，避免站外交易）
- **预期结果**:
  - 敏感词自动替换为"***"或拦截发送
  - 提示"消息包含敏感词，请修改后重新发送"
  - 多次违规自动警告并限制发言

#### TC-CHAT-006: 消息防骚扰
- **优先级**: P1
- **测试类型**: 用户体验、安全防护
- **测试场景**:
  - 用户A短时间内向用户B发送50条消息
- **预期结果**:
  - 频率限制：同一用户向同一对象1分钟内最多发送10条消息
  - 超出限制提示"发送过于频繁，请稍后再试"
  - 接收方可选择"拉黑"或"免打扰"

#### TC-CHAT-007: 消息记录保存
- **优先级**: P2
- **测试类型**: 功能测试
- **测试步骤**:
  1. 用户A与用户B聊天10条消息
  2. 退出应用
  3. 重新打开应用查看聊天记录
  4. 卸载应用重装后登录
- **预期结果**:
  - 本地保存聊天记录，重启应用可查看
  - 云端备份聊天记录（最近30天）
  - 重装应用后可恢复聊天记录

---

## 三、Phase 2 增强功能测试用例

### 模块5: 支付+众筹

#### TC-PAY-001: 医疗费用众筹 - 发起众筹
- **优先级**: P1
- **测试类型**: 功能测试
- **前置条件**: 已发布需救助信息，已完成实名认证
- **测试步骤**:
  1. 进入已发布的救助信息详情
  2. 点击"发起众筹"
  3. 填写众筹金额（如3000元）
  4. 上传医疗费用单据照片
  5. 填写资金用途说明
  6. 设置众筹截止时间（如7天）
  7. 提交审核
- **预期结果**:
  - 众筹金额范围限制：100-20,000元
  - 必须上传医疗单据（OCR识别金额）
  - 资金用途说明不少于50字
  - 众筹截止时间范围：3-30天
  - 提交后状态为"审核中"（预计1个工作日）

#### TC-PAY-002: 众筹捐赠
- **优先级**: P1
- **测试类型**: 功能测试
- **测试步骤**:
  1. 浏览众筹列表，选择一个众筹项目
  2. 查看众筹详情（目标金额、已筹金额、支持人数、剩余时间）
  3. 点击"支持"按钮
  4. 选择捐赠金额（10元/50元/100元/自定义）
  5. 选择支付方式（微信支付/支付宝）
  6. 完成支付
- **预期结果**:
  - 众筹进度实时更新（已筹金额/目标金额）
  - 支持人数+1
  - 捐赠记录显示在个人中心
  - 捐赠成功后发送感谢消息

#### TC-PAY-003: 众筹资金管理
- **优先级**: P0
- **测试类型**: 功能测试、资金安全
- **测试场景**:
  - 场景1: 众筹成功（达到目标金额）
  - 场景2: 众筹失败（未达到目标金额，截止时间到）
- **预期结果**:
  - 场景1: 资金解冻，转入发起人账户，平台收取5%手续费
  - 场景2: 资金原路退回捐赠者，3个工作日内到账
  - 所有资金流水可追溯，公开透明

#### TC-PAY-004: 捐赠功能
- **优先级**: P2
- **测试类型**: 功能测试
- **测试步骤**:
  1. 进入平台公益基金页面
  2. 选择捐赠金额
  3. 完成支付
  4. 查看捐赠证书
- **预期结果**:
  - 捐赠成功后生成电子证书（可下载/分享）
  - 捐赠金额计入个人公益值
  - 公益基金使用情况定期公示

#### TC-PAY-005: 支付安全
- **优先级**: P0
- **测试类型**: 安全测试
- **测试场景**:
  - 场景1: 支付过程中断（网络中断/应用闪退）
  - 场景2: 重复支付
  - 场景3: 异常大额支付（单笔>5000元）
- **预期结果**:
  - 场景1: 支付状态正确回滚，用户可重新发起支付
  - 场景2: 防重复提交机制，同一订单仅能支付一次
  - 场景3: 触发二次确认，短信验证码验证

---

### 模块6: 智能匹配算法

#### TC-MATCH-001: 基于距离的推荐
- **优先级**: P2
- **测试类型**: 功能测试、算法验证
- **测试数据**:
  - 用户位置: 上海市浦东新区
  - 宠物A: 3km（待领养猫）
  - 宠物B: 15km（待领养狗）
  - 宠物C: 50km（待领养猫）
- **预期结果**:
  - 推荐优先级: A > C > B（优先推荐同类型+距离近）
  - 推荐理由标注："距离您3km，可上门看望"

#### TC-MATCH-002: 基于用户偏好的推荐
- **优先级**: P2
- **测试类型**: 功能测试、算法验证
- **测试数据**:
  - 用户浏览历史: 90%为猫，10%为狗
  - 用户收藏: 5只猫
- **预期结果**:
  - 首页推荐以猫为主（占比70%+）
  - 推荐理由："根据您的喜好推荐"

#### TC-MATCH-003: 成功领养预测模型
- **优先级**: P2
- **测试类型**: 算法验证、业务指标
- **测试方法**:
  - 统计用户画像（年龄、职业、居住环境、养宠经验）
  - 预测该用户与某宠物的匹配度（0-100分）
- **预期结果**:
  - 匹配度>80分时显示"强烈推荐"标签
  - 匹配度<30分时不推荐
  - 模型准确率>60%（验证需结合实际领养数据）

---

### 模块7: 社区功能

#### TC-COMMUNITY-001: 发布救助故事
- **优先级**: P2
- **测试类型**: 功能测试
- **测试步骤**:
  1. 进入社区，点击"发布"
  2. 选择类型"救助故事"
  3. 填写标题、正文（支持富文本）
  4. 上传图片/视频
  5. 选择标签（救助经验/领养心得/医疗知识）
  6. 提交发布
- **预期结果**:
  - 标题限制：5-50字
  - 正文限制：50-5000字
  - 图片最多9张，视频最多1个（<100MB）
  - 发布后进入审核队列（预计2小时内）

#### TC-COMMUNITY-002: 点赞评论
- **优先级**: P2
- **测试类型**: 功能测试
- **测试步骤**:
  1. 浏览社区帖子
  2. 点击点赞按钮
  3. 发表评论"感谢分享，很有帮助"
  4. 回复其他用户评论
- **预期结果**:
  - 点赞实时更新数量
  - 评论支持@其他用户
  - 评论排序：热门优先/时间倒序可切换
  - 发布者收到点赞/评论通知

#### TC-COMMUNITY-003: 内容审核
- **优先级**: P1
- **测试类型**: 安全测试
- **测试场景**:
  - 场景1: 发布广告类内容（宠物买卖、医院广告）
  - 场景2: 发布极端言论（攻击他人、极端动保）
  - 场景3: 发布无关内容（娱乐八卦、政治话题）
- **预期结果**:
  - 机器审核拦截敏感词/广告词
  - 人工审核确认后下架违规内容
  - 违规用户扣除信用分，严重者封禁账号

#### TC-COMMUNITY-004: 社区氛围监控
- **优先级**: P2
- **测试类型**: 运营指标
- **测试方法**:
  - 统计每日社区发帖量、评论量、点赞量
  - 分析内容类型分布（救助经验/领养心得/医疗知识/其他）
- **预期结果**:
  - 救助相关内容占比>60%（避免主题偏移）
  - 日均发帖量>100条（活跃社区）
  - 用户停留时长增加40%（需求文档指标）

---

### 模块8: 志愿者活动

#### TC-VOLUNTEER-001: 发布志愿者任务
- **优先级**: P2
- **测试类型**: 功能测试
- **前置条件**: 救助机构或认证志愿者身份
- **测试步骤**:
  1. 进入志愿者活动页面，点击"发布任务"
  2. 填写任务标题、描述
  3. 选择任务类型（救助协助/运输/临时寄养/医疗陪护）
  4. 填写任务时间、地点
  5. 设置所需志愿者人数
  6. 发布任务
- **预期结果**:
  - 任务类型必选
  - 任务时间不能早于当前时间
  - 地点支持地图选点
  - 发布后推送给附近志愿者

#### TC-VOLUNTEER-002: 认领任务
- **优先级**: P2
- **测试类型**: 功能测试
- **测试步骤**:
  1. 志愿者浏览任务列表
  2. 筛选任务（按距离/时间/类型）
  3. 查看任务详情
  4. 点击"我要参加"
  5. 确认任务时间地点
  6. 提交认领
- **预期结果**:
  - 任务详情显示已报名人数/需求人数
  - 认领成功后显示在"我的任务"
  - 任务发布者收到报名通知
  - 任务时间冲突时提示

#### TC-VOLUNTEER-003: 任务完成与评价
- **优先级**: P2
- **测试类型**: 功能测试
- **测试步骤**:
  1. 任务时间到达后，志愿者签到
  2. 任务完成后，志愿者上传现场照片
  3. 发布者确认任务完成
  4. 双方互评（1-5星+文字评价）
- **预期结果**:
  - 签到支持GPS验证（距离任务地点<200米）
  - 照片上传证明任务完成
  - 评价后志愿者获得积分奖励
  - 评价显示在志愿者个人主页

#### TC-VOLUNTEER-004: 积分激励体系
- **优先级**: P2
- **测试类型**: 功能测试
- **积分规则**:
  - 完成任务: +10-50分（根据难度）
  - 获得好评: +5分
  - 连续参与: 每月+20分
  - 技能认证: +100分
- **预期结果**:
  - 积分累计准确
  - 积分可兑换（虚拟徽章、公益证书、合作商家优惠券）
  - 积分排行榜激励

---

### 模块9: 通知提醒

#### TC-NOTIFY-001: 推送类型分类
- **优先级**: P1
- **测试类型**: 功能测试
- **推送类型**:
  - 紧急救助（红色，立即推送）
  - 日常更新（蓝色，批量推送）
  - 系统通知（灰色，不可关闭）
- **预期结果**:
  - 紧急救助实时推送，震动+声音提醒
  - 日常更新每日定时推送1次（用户可自定义时间）
  - 系统通知重要公告必达

#### TC-NOTIFY-002: 用户自定义推送设置
- **优先级**: P1
- **测试类型**: 功能测试
- **测试步骤**:
  1. 进入"设置"-"通知管理"
  2. 关闭"日常更新"推送
  3. 设置"紧急救助"推送范围为"5km内"
  4. 设置免打扰时间段（22:00-08:00）
- **预期结果**:
  - 日常更新推送停止
  - 仅5km内紧急救助触发推送
  - 免打扰时段内静默通知（不震动不声音）

#### TC-NOTIFY-003: 基于地理位置的精准推送
- **优先级**: P1
- **测试类型**: 功能测试
- **测试场景**:
  - 用户位置: 北京市朝阳区
  - 新发布救助信息: 上海市浦东新区（距离1200km）
- **预期结果**:
  - 不推送距离过远的信息
  - 仅推送用户设置半径内的信息

#### TC-NOTIFY-004: 推送频率控制
- **优先级**: P0
- **测试类型**: 用户体验、风险控制
- **测试场景**:
  - 同一天内有30条新救助信息发布
- **预期结果**:
  - 单用户单日推送总数≤10条（避免骚扰）
  - 优先推送紧急救助、距离近、匹配度高的信息
  - 其余信息合并为摘要推送

#### TC-NOTIFY-005: 推送点击率验证
- **优先级**: P0
- **测试类型**: 业务指标
- **测试方法**:
  - 统计100次推送，记录点击打开次数
- **预期结果**:
  - 推送点击率 ≥ 20%（需求文档指标）
  - 点击率 = 点击次数 / 推送次数

#### TC-NOTIFY-006: 推送导致卸载率监控
- **优先级**: P0
- **测试类型**: 业务指标、风险控制
- **测试方法**:
  - 统计推送后24小时内卸载用户数
- **预期结果**:
  - 推送导致卸载率 < 5%（需求文档指标）
  - 卸载率超标时自动降低推送频率

---

## 四、非功能性测试用例

### 模块10: 性能测试

#### TC-PERF-001: 首页加载性能
- **优先级**: P0
- **测试类型**: 性能测试
- **测试环境**:
  - 设备: iPhone 12 / 小米11
  - 网络: 4G (延迟50ms, 带宽10Mbps)
- **预期结果**:
  - 首页加载时间 < 3秒
  - 地图加载时间 < 2秒
  - 信息点渲染时间 < 1秒

#### TC-PERF-002: 搜索响应性能
- **优先级**: P1
- **测试类型**: 性能测试
- **测试数据**: 数据库10,000条宠物信息
- **预期结果**:
  - 搜索响应时间 < 1秒
  - 筛选响应时间 < 500ms
  - 滚动加载流畅（60fps）

#### TC-PERF-003: 大量数据加载
- **优先级**: P1
- **测试类型**: 性能测试
- **测试场景**:
  - 地图显示1000+标记点
  - 聊天记录10,000条消息
  - 社区帖子5,000条
- **预期结果**:
  - 地图标记聚合显示，缩放时动态加载
  - 聊天记录分页加载（每次100条）
  - 社区帖子虚拟列表渲染

#### TC-PERF-004: 内存占用
- **优先级**: P1
- **测试类型**: 性能测试
- **测试步骤**:
  1. 打开应用，浏览各功能模块30分钟
  2. 监控内存占用
- **预期结果**:
  - 内存占用 < 200MB（iOS）
  - 内存占用 < 300MB（Android）
  - 无内存泄漏（长时间使用内存不持续增长）

#### TC-PERF-005: 弱网环境测试
- **优先级**: P1
- **测试类型**: 性能测试
- **测试环境**: 2G网络（延迟500ms, 带宽100Kbps）
- **预期结果**:
  - 核心功能可用（地图、搜索、聊天）
  - 图片自动降级加载（缩略图优先）
  - 提示"网络较慢，加载中..."

#### TC-PERF-006: 并发测试
- **优先级**: P1
- **测试类型**: 性能测试
- **测试场景**:
  - 1000用户同时在线
  - 100用户同时发布信息
  - 500用户同时搜索
- **预期结果**:
  - 服务器响应时间 < 2秒
  - 数据库查询时间 < 500ms
  - 无请求失败或超时

---

### 模块11: 安全测试

#### TC-SEC-001: 个人信息保护
- **优先级**: P0
- **测试类型**: 安全测试、合规测试
- **测试场景**:
  - 查看其他用户个人信息
  - 尝试导出用户数据
- **预期结果**:
  - 敏感信息脱敏显示（手机号显示为138****5678）
  - 身份证号不对外展示
  - 位置信息模糊化处理
  - 符合《个人信息保护法》要求

#### TC-SEC-002: 数据加密
- **优先级**: P0
- **测试类型**: 安全测试
- **测试内容**:
  - 网络传输数据
  - 本地存储数据
- **预期结果**:
  - HTTPS加密传输（TLS 1.2+）
  - 敏感数据本地加密存储（AES-256）
  - 密码不明文存储（bcrypt哈希）

#### TC-SEC-003: 权限管理
- **优先级**: P0
- **测试类型**: 安全测试
- **测试场景**:
  - 未登录用户尝试发布信息
  - 普通用户尝试访问管理后台
  - 未认证用户尝试发起众筹
- **预期结果**:
  - 权限校验严格，未授权操作被拦截
  - 提示"请先登录/认证"
  - 无越权访问漏洞

#### TC-SEC-004: SQL注入防护
- **优先级**: P0
- **测试类型**: 安全测试
- **测试数据**:
  - 搜索框输入: `' OR '1'='1`
  - 姓名输入: `'; DROP TABLE users; --`
- **预期结果**:
  - 输入参数化处理，防止SQL注入
  - 特殊字符转义或过滤
  - 无数据库异常错误暴露

#### TC-SEC-005: XSS跨站脚本防护
- **优先级**: P0
- **测试类型**: 安全测试
- **测试数据**:
  - 宠物描述输入: `<script>alert('XSS')</script>`
  - 评论输入: `<img src=x onerror=alert('XSS')>`
- **预期结果**:
  - HTML标签转义显示
  - JavaScript代码不执行
  - CSP策略生效

#### TC-SEC-006: CSRF跨站请求伪造防护
- **优先级**: P1
- **测试类型**: 安全测试
- **测试场景**:
  - 伪造表单提交请求
- **预期结果**:
  - Token验证机制生效
  - 非法请求被拦截

#### TC-SEC-007: 接口安全
- **优先级**: P1
- **测试类型**: 安全测试
- **测试场景**:
  - 频繁调用接口（暴力破解）
  - 篡改请求参数
- **预期结果**:
  - 接口限流（同一IP 1分钟内最多100次请求）
  - 参数签名验证，篡改无效
  - 异常请求记录日志

---

### 模块12: 兼容性测试

#### TC-COMPAT-001: iOS系统兼容性
- **优先级**: P0
- **测试类型**: 兼容性测试
- **测试范围**:
  - iOS 14.0
  - iOS 15.0
  - iOS 16.0
  - iOS 17.0
- **预期结果**:
  - 所有版本功能正常
  - UI适配完整
  - 无闪退或卡顿

#### TC-COMPAT-002: Android系统兼容性
- **优先级**: P0
- **测试类型**: 兼容性测试
- **测试范围**:
  - Android 9
  - Android 10
  - Android 11
  - Android 12
  - Android 13
- **预期结果**:
  - 所有版本功能正常
  - 适配不同厂商ROM（华为/小米/OPPO/vivo）

#### TC-COMPAT-003: 不同设备分辨率适配
- **优先级**: P1
- **测试类型**: 兼容性测试
- **测试设备**:
  - 小屏: iPhone SE (4.7寸)
  - 中屏: iPhone 13 (6.1寸)
  - 大屏: iPhone 13 Pro Max (6.7寸)
  - 平板: iPad (10.2寸)
- **预期结果**:
  - UI自适应布局
  - 文字图片清晰
  - 无UI错位或遮挡

#### TC-COMPAT-004: Web浏览器兼容性
- **优先级**: P2
- **测试类型**: 兼容性测试
- **测试浏览器**:
  - Chrome (最新版)
  - Safari (最新版)
  - Firefox (最新版)
  - Edge (最新版)
- **预期结果**:
  - 核心功能正常
  - 地图显示正常
  - 推送功能降级处理（Web Push API）

---

## 五、业务指标验证测试

### TC-KPI-001: 领养成功率
- **优先级**: P0
- **测试类型**: 业务指标测试
- **测试方法**:
  - 统计100条待领养信息
  - 追踪其中成功领养数量
- **预期结果**:
  - 领养成功率 ≥ 30%（需求文档目标）
  - 成功率 = 成功领养数量 / 总待领养数量

### TC-KPI-002: 用户留存率
- **优先级**: P0
- **测试类型**: 业务指标测试
- **测试方法**:
  - 统计100名新注册用户
  - 追踪次日、7日活跃情况
- **预期结果**:
  - 次日留存率 ≥ 40%
  - 7日留存率 ≥ 20%

### TC-KPI-003: 虚假信息占比
- **优先级**: P0
- **测试类型**: 业务指标测试、风险控制
- **测试方法**:
  - 抽样100条发布信息
  - 人工审核+用户举报统计虚假信息数量
- **预期结果**:
  - 虚假信息占比 < 10%（需求文档要求，当前30%+）
  - AI审核准确率 > 85%

### TC-KPI-004: 救助响应时间
- **优先级**: P1
- **测试类型**: 业务指标测试
- **测试方法**:
  - 统计紧急救助信息发布到志愿者响应的时间
- **预期结果**:
  - 平均响应时间 < 6小时（需求文档目标，当前48小时）
  - 80%的紧急救助12小时内有人响应

### TC-KPI-005: 获客成本与用户价值
- **优先级**: P2
- **测试类型**: 业务指标测试
- **测试方法**:
  - 计算单用户获客成本（CAC）
  - 计算用户生命周期价值（LTV）
- **预期结果**:
  - LTV/CAC > 3（需求文档指标）
  - 运营可持续

---

## 六、风险专项测试

### TC-RISK-001: 虚假信息泛滥风险
- **优先级**: P0
- **测试类型**: 风险测试
- **测试场景**:
  - 恶意用户批量发布虚假领养信息
  - 同一手机号注册多个账号发布相似信息
- **预期结果**:
  - AI识别相似图片（图片hash比对）
  - 检测异常发布行为（同一IP/设备短时间多次发布）
  - 自动拦截+人工复审

### TC-RISK-002: 用户隐私泄露风险
- **优先级**: P0
- **测试类型**: 风险测试
- **测试场景**:
  - 爬虫批量抓取用户信息
  - 数据库泄露
- **预期结果**:
  - 接口反爬虫机制（验证码、限流）
  - 数据库加密存储
  - 敏感信息脱敏处理
  - 定期安全审计

### TC-RISK-003: 极端言论与冲突风险
- **优先级**: P1
- **测试类型**: 风险测试
- **测试场景**:
  - 社区发布极端动物保护言论（攻击性内容）
  - 用户之间冲突升级
- **预期结果**:
  - 敏感词过滤拦截
  - 用户举报机制快速响应
  - 运营人工介入调解
  - 严重违规账号封禁

### TC-RISK-004: 支付资金安全风险
- **优先级**: P0
- **测试类型**: 风险测试
- **测试场景**:
  - 众筹资金挪用
  - 支付异常（重复扣款/未到账）
- **预期结果**:
  - 资金托管在第三方支付平台
  - 众筹资金冻结至审核通过
  - 支付异常自动退款机制
  - 所有资金流水可追溯

---

## 七、测试执行计划

### 7.1 测试阶段划分

**第一阶段：MVP Phase 1 测试（3周）**
- Week 1: 用户认证系统 + 地图发布功能
- Week 2: 搜索过滤 + 一对一沟通
- Week 3: 性能测试 + 安全测试 + 回归测试

**第二阶段：Phase 2 测试（2周）**
- Week 1: 支付众筹 + 智能匹配
- Week 2: 社区功能 + 志愿者系统

**第三阶段：全功能验收测试（1周）**
- 业务指标验证
- 风险专项测试
- 用户验收测试（UAT）

### 7.2 测试资源配置

**测试团队（5人）：**
- 测试经理 × 1（全流程把控）
- 功能测试工程师 × 2
- 自动化测试工程师 × 1
- 安全测试工程师 × 1

**测试设备：**
- iOS设备: iPhone 12, iPhone SE, iPad
- Android设备: 小米11, 华为P40, OPPO Reno
- Web浏览器: Chrome, Safari, Firefox, Edge

### 7.3 缺陷管理

**缺陷等级定义：**
- **P0 - 致命**: 核心流程阻塞，系统崩溃，数据丢失
- **P1 - 严重**: 主要功能缺陷，严重影响用户体验
- **P2 - 一般**: 次要功能问题，有替代方案
- **P3 - 轻微**: 优化建议，不影响使用

**缺陷修复要求：**
- P0: 24小时内修复
- P1: 3个工作日内修复
- P2: 1周内修复
- P3: 排期修复或延后

### 7.4 测试通过标准

**MVP上线标准：**
- P0缺陷: 0个
- P1缺陷: ≤ 3个
- 核心业务指标达标（领养成功率>30%，虚假信息<10%）
- 性能测试通过
- 安全测试通过
- 用户验收测试通过

---

## 八、自动化测试建议

### 8.1 自动化测试范围

**优先自动化场景：**
1. 用户认证流程（注册/登录/认证）
2. 搜索过滤功能
3. 信息发布流程
4. 支付流程
5. 接口回归测试

**不建议自动化场景：**
1. UI视觉验证（需人工确认）
2. 复杂业务逻辑（如AI匹配算法，变化频繁）
3. 一次性测试（如新功能探索性测试）

### 8.2 自动化测试工具

**推荐工具栈：**
- UI自动化: Appium (移动端), Selenium (Web)
- 接口测试: Postman + Newman
- 性能测试: JMeter
- 安全测试: OWASP ZAP
- 持续集成: Jenkins + GitHub Actions

### 8.3 自动化测试覆盖率目标

- 接口测试覆盖率: 80%
- 核心流程UI测试覆盖率: 60%
- 总体自动化覆盖率: 50%

---

## 九、附录

### 附录A: 测试数据准备

**用户数据：**
- 普通用户: 100个（已实名认证）
- 志愿者: 50个（已技能认证）
- 救助机构: 10个（已资质认证）

**宠物信息数据：**
- 待领养宠物: 500条
- 需救助动物: 200条
- 已领养宠物: 300条

**地理位置数据：**
- 覆盖全国主要城市（北上广深+20个省会城市）
- 每个城市至少50条信息

### 附录B: 关键业务指标汇总

| 指标名称 | 目标值 | 当前值 | 测试用例 |
|---------|--------|--------|---------|
| 领养成功率 | ≥30% | - | TC-KPI-001 |
| 搜索转化率 | ≥35% | - | TC-SEARCH-005 |
| 推送点击率 | ≥20% | - | TC-NOTIFY-005 |
| 用户次日留存率 | ≥40% | - | TC-KPI-002 |
| 用户7日留存率 | ≥20% | - | TC-KPI-002 |
| 虚假信息占比 | <10% | 30%+ | TC-KPI-003 |
| 救助响应时间 | <6小时 | 48小时 | TC-KPI-004 |
| 推送卸载率 | <5% | - | TC-NOTIFY-006 |

### 附录C: 风险评估矩阵

| 风险类型 | 概率 | 影响 | 优先级 | 应对策略 |
|---------|------|------|--------|---------|
| 虚假信息泛滥 | 高(70%) | 严重 | P0 | AI审核+人工复审+信用体系 |
| 用户隐私泄露 | 低(30%) | 严重 | P0 | 数据加密+权限控制+安全审计 |
| 运营成本过高 | 中(50%) | 严重 | P1 | 成本监控+B端收费+志愿者体系 |
| 极端言论冲突 | 中(40%) | 中等 | P1 | 敏感词过滤+人工介入+社区规范 |
| 支付资金安全 | 低(20%) | 严重 | P0 | 第三方托管+资金冻结+流水追溯 |

---

**文档结束**

**版本历史：**
- v1.0 (2025-11-17): 初始版本，覆盖MVP Phase 1 + Phase 2 核心功能

**审核人**: [待填写]
**批准人**: [待填写]
